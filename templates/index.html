{% extends "base.html" %}

{% block content %}
<div class="card">
  <h2>{{ title }}</h2>
  {% if msg %}
    <p class="msg">{{ msg }}</p>
  {% endif %}
</div>

<!-- 名字提交 -->
<div class="card">
  <form method="post" action="/submit">
    <input type="text" name="username" placeholder="请输入你的名字" required>
    <button type="submit">提交名字</button>
  </form>

  {% if name_history %}
    <h3>历史名字：</h3>
    <ul>
      {% for entry in name_history %}
        <li>{{ entry.username }}</li>
      {% endfor %}
    </ul>

    <!-- 分页 -->
    <div class="pagination">
      {% if name_page > 1 %}
        <a href="/?name_page={{ name_page - 1 }}&compute_page={{ compute_page }}">上一页</a>
      {% endif %}
      {% if name_page < name_pages %}
        <a href="/?name_page={{ name_page + 1 }}&compute_page={{ compute_page }}">下一页</a>
      {% endif %}
    </div>

    <a href="/download/names" class="download-btn">下载名字数据</a>
  {% endif %}
</div>

<!-- 数字计算 -->
<div class="card">
  <form method="post" action="/compute">
    <input type="number" name="number" placeholder="输入一个数字" required>
    <button type="submit">计算平方和立方</button>
  </form>

  {% if compute_history %}
    <h3>历史计算：</h3>
    <ul>
      {% for entry in compute_history %}
        <li>{{ entry.number }} → 平方: {{ entry.square }}, 立方: {{ entry.cube }}</li>
      {% endfor %}
    </ul>

    <!-- 分页 -->
    <div class="pagination">
      {% if compute_page > 1 %}
        <a href="/?name_page={{ name_page }}&compute_page={{ compute_page - 1 }}">上一页</a>
      {% endif %}
      {% if compute_page < compute_pages %}
        <a href="/?name_page={{ name_page }}&compute_page={{ compute_page + 1 }}">下一页</a>
      {% endif %}
    </div>

    <a href="/download/computes" class="download-btn">下载计算数据</a>
  {% endif %}
</div>
{% endblock %}
